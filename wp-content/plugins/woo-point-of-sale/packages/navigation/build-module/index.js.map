{"version":3,"sources":["/home/users/himanshu.kumar/www/html/newtest/wp-content/plugins/woo-point-of-sale/packages/navigation/src/index.js"],"names":["addQueryArgs","parse","pick","uniq","applyFilters","getHistory","navUtils","getPath","location","pathname","getPersistedQuery","query","getQuery","params","getIdsFromQuery","queryString","split","map","id","parseInt","filter","Boolean","getSearchWords","Error","search","searchWord","replace","getNewPath","path","currentQuery","args","length","substring","onQueryChange","param","key","dir","updateQueryString","orderby","order","queryParam","ids","undefined","value","newPath","push"],"mappings":"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","sourcesContent":["/** @format */\n/**\n * External dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\nimport { parse } from 'qs';\nimport { pick, uniq } from 'lodash';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { getHistory } from './history';\n\n// Expose history so all uses get the same history object.\nexport { getHistory };\n\n// Export all filter utilities\nexport * from './filters';\n\n/**\n * Internal dependencies\n */\n// Import the module into itself. Functions consumed from this import can be mocked in tests.\nimport * as navUtils from './index';\n\n/**\n * Get the current path from history.\n *\n * @return {String}  Current path.\n */\nexport const getPath = () => getHistory().location.pathname;\n\n/**\n * Gets query parameters that should persist between screens or updates\n * to reports, such as filtering.\n *\n * @param {Object} query Query containing the parameters.\n * @return {Object} Object containing the persisted queries.\n */\nexport const getPersistedQuery = ( query = navUtils.getQuery() ) => {\n\tconst params = applyFilters( 'woocommerce_admin_persisted_queries', [\n\t\t'period',\n\t\t'compare',\n\t\t'before',\n\t\t'after',\n\t\t'interval',\n\t\t'type',\n\t] );\n\treturn pick( query, params );\n};\n\n/**\n * Get an array of IDs from a comma-separated query parameter.\n *\n * @param {string} queryString string value extracted from URL.\n * @return {Array} List of IDs converted to numbers.\n */\nexport function getIdsFromQuery( queryString = '' ) {\n\treturn uniq(\n\t\tqueryString\n\t\t\t.split( ',' )\n\t\t\t.map( id => parseInt( id, 10 ) )\n\t\t\t.filter( Boolean )\n\t);\n}\n\n/**\n * Get an array of searched words given a query.\n *\n * @param {Object} query Query object.\n * @return {Array} List of search words.\n */\nexport function getSearchWords( query = navUtils.getQuery() ) {\n\tif ( typeof query !== 'object' ) {\n\t\tthrow new Error(\n\t\t\t'Invalid parameter passed to getSearchWords, it expects an object or no parameters.'\n\t\t);\n\t}\n\tconst { search } = query;\n\tif ( ! search ) {\n\t\treturn [];\n\t}\n\tif ( typeof search !== 'string' ) {\n\t\tthrow new Error(\n\t\t\t\"Invalid 'search' type. getSearchWords expects query's 'search' property to be a string.\"\n\t\t);\n\t}\n\treturn search.split( ',' ).map( searchWord => searchWord.replace( '%2C', ',' ) );\n}\n\n/**\n * Return a URL with set query parameters.\n *\n * @param {Object} query object of params to be updated.\n * @param {String} path Relative path (defaults to current path).\n * @param {Object} currentQuery object of current query params (defaults to current querystring).\n * @return {String}  Updated URL merging query params into existing params.\n */\nexport function getNewPath( query, path = getPath(), currentQuery = getQuery() ) {\n\tconst args = { ...currentQuery, ...query };\n\tif ( '/' !== path ) {\n\t\targs.path = path;\n\t}\n\n\treturn addQueryArgs( '', args );\n}\n\n/**\n * Get the current query string, parsed into an object, from history.\n *\n * @return {Object}  Current query object, defaults to empty object.\n */\nexport function getQuery() {\n\tconst search = getHistory().location.search;\n\tif ( search.length ) {\n\t\treturn parse( search.substring( 1 ) ) || {};\n\t}\n\treturn {};\n}\n\n/**\n * This function returns an event handler for the given `param`\n *\n * @param {string} param The parameter in the querystring which should be updated (ex `page`, `per_page`)\n * @param {string} path Relative path (defaults to current path).\n * @param {string} query object of current query params (defaults to current querystring).\n * @return {function} A callback which will update `param` to the passed value when called.\n */\nexport function onQueryChange( param, path = getPath(), query = getQuery() ) {\n\tswitch ( param ) {\n\t\tcase 'sort':\n\t\t\treturn ( key, dir ) => updateQueryString( { orderby: key, order: dir }, path, query );\n\t\tcase 'compare':\n\t\t\treturn ( key, queryParam, ids ) =>\n\t\t\t\tupdateQueryString(\n\t\t\t\t\t{\n\t\t\t\t\t\t[ queryParam ]: `compare-${ key }`,\n\t\t\t\t\t\t[ key ]: ids,\n\t\t\t\t\t\tsearch: undefined,\n\t\t\t\t\t},\n\t\t\t\t\tpath,\n\t\t\t\t\tquery\n\t\t\t\t);\n\t\tdefault:\n\t\t\treturn value => updateQueryString( { [ param ]: value }, path, query );\n\t}\n}\n\n/**\n * Updates the query parameters of the current page.\n *\n * @param {Object} query object of params to be updated.\n * @param {String} path Relative path (defaults to current path).\n * @param {Object} currentQuery object of current query params (defaults to current querystring).\n */\nexport function updateQueryString( query, path = getPath(), currentQuery = getQuery() ) {\n\tconst newPath = getNewPath( query, path, currentQuery );\n\t// console.log(newPath)\n\t// console.log(document.location.push(document.location.href))\n\tgetHistory().push( newPath );\n}\n"]}